package almacenes;

import java.util.Random;

public class Cliente implements Runnable {

	private static final int MAX_INTENTOS = 10;

	private final Puerta puerta;
	private final Almacen almacen;
	private final String nombre;
	private final Random generador;

	public Cliente(Puerta puerta, Almacen almacen, String nombre) {
		this.puerta = puerta;
		this.almacen = almacen;
		this.nombre = nombre;
		this.generador = new Random();
	}



	@Override
	public void run() {
		for (int intento = 0; intento <= MAX_INTENTOS; intento++) {
			if (!puerta.estaOcupada() && puerta.intentarEntrar()) {
				puerta.liberarPuerta();
				if (almacen.cogerProducto()) {
					System.out.println(this.nombre + " COGIÃ“ UN PRODUCTO! <--------------------------");
					return;
				} else {
					System.out.println(this.nombre + " ha pasado por la puerta pero no ha cogido nada ");
					return;
				}

			}
			System.out.println(this.nombre + " no ha entrado.");

		}

	}
}
